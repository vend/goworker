build:
  box: golang:1.6

  steps:
    - setup-go-workspace

    - script:
        name: env
        code: env

    - add-ssh-key:
        keyname: SSH_KEY

    - add-to-known_hosts:
        hostname: github.com
        fingerprint: 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48
        type: rsa

    - script:
        name: dependencies
        code: ci/setup.sh

    # Test the project
    - script:
        name: go test
        code: go test $(go list ./... | grep -v /vendor/)